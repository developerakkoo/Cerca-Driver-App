<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title class="ion-text-center">
      <div class="modal-header">
        <ion-icon name="car-sport" class="header-icon"></ion-icon>
        <span>Ride Details</span>
      </div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()" fill="clear">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="modal-content">
  <div class="ride-details-container">
    
    <!-- Status Banner -->
    <div class="status-banner" [ngClass]="'status-' + rideData?.status">
      <div class="status-content">
        <div class="status-icon">
          <ion-icon name="checkmark-circle" *ngIf="rideData?.status === 'completed'"></ion-icon>
          <ion-icon name="time" *ngIf="rideData?.status === 'accepted'"></ion-icon>
          <ion-icon name="navigate" *ngIf="rideData?.status === 'in_progress'"></ion-icon>
        </div>
        <div class="status-text">
          <h2>{{ getStatusText() }}</h2>
          <p *ngIf="rideData?.status === 'accepted'">Ready to start your journey</p>
          <p *ngIf="rideData?.status === 'in_progress'">Ride in progress</p>
          <p *ngIf="rideData?.status === 'completed'">Ride completed successfully</p>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <ion-button expand="block" fill="outline" color="success" (click)="callRider()">
        <ion-icon name="call" slot="start"></ion-icon>
        Call Rider
      </ion-button>
      <ion-button expand="block" fill="outline" color="primary" (click)="openChat()">
        <ion-icon name="chatbubbles" slot="start"></ion-icon>
        Chat
      </ion-button>
    </div>

    <!-- Trip Summary -->
    <ion-card class="trip-summary-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="map" color="primary"></ion-icon>
          Trip Summary
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="trip-stats">
          <div class="stat-item">
            <ion-icon name="trending-up" color="primary"></ion-icon>
            <div class="stat-content">
              <span class="stat-value">{{ rideData?.distanceInKm }} km</span>
              <span class="stat-label">Distance</span>
            </div>
          </div>
          <div class="stat-item">
            <ion-icon name="card" color="success"></ion-icon>
            <div class="stat-content">
              <span class="stat-value">â‚¹{{ rideData?.fare }}</span>
              <span class="stat-label">Fare</span>
            </div>
          </div>
          <div class="stat-item">
            <ion-icon name="wallet" color="warning"></ion-icon>
            <div class="stat-content">
              <span class="stat-value">{{ rideData?.paymentMethod }}</span>
              <span class="stat-label">Payment</span>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Pickup Location -->
    <ion-card class="location-card pickup-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="location" color="success"></ion-icon>
          Pickup Location
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="location-details">
          <p class="address">{{ rideData?.pickupAddress }}</p>
          <div class="coordinates">
            <ion-icon name="navigate" color="medium"></ion-icon>
            <span>{{ rideData?.pickupLocation?.coordinates[1] | number:'1.6-6' }}, {{ rideData?.pickupLocation?.coordinates[0] | number:'1.6-6' }}</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Dropoff Location -->
    <ion-card class="location-card dropoff-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="location" color="danger"></ion-icon>
          Dropoff Location
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="location-details">
          <p class="address">{{ rideData?.dropoffAddress }}</p>
          <div class="coordinates">
            <ion-icon name="navigate" color="medium"></ion-icon>
            <span>{{ rideData?.dropoffLocation?.coordinates[1] | number:'1.6-6' }}, {{ rideData?.dropoffLocation?.coordinates[0] | number:'1.6-6' }}</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Ride Info -->
    <ion-card class="ride-info-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="information-circle" color="primary"></ion-icon>
          Ride Information
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="ride-info">
          <div class="info-item">
            <span class="label">Ride ID:</span>
            <span class="value">{{ rideData?._id }}</span>
          </div>
          <div class="info-item">
            <span class="label">Ride Type:</span>
            <span class="value">{{ rideData?.rideType | titlecase }}</span>
          </div>
          <div class="info-item">
            <span class="label">Created:</span>
            <span class="value">{{ rideData?.createdAt | date:'short' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Status:</span>
            <ion-badge [color]="getStatusColor()">{{ getStatusText() }}</ion-badge>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>
